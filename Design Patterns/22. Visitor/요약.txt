ê°ì²´ì˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í–‰ë™ ë””ìì¸ íŒ¨í„´

ğŸ”¹ Visitor íŒ¨í„´ì„ ì‚¬ìš©í•  ë•Œì˜ ì¥ì ê³¼ ë‹¨ì 
âœ… ì¥ì 
1. ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ
2. ì—°ê´€ëœ ê¸°ëŠ¥ì„ Visitor í´ë˜ìŠ¤ì— ë¬¶ì–´ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆìŒ
3. ìƒˆë¡œìš´ ì—°ì‚°ì„ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆìŒ

âŒ ë‹¨ì 
1. ìƒˆë¡œìš´ Element í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•  ë•Œ ê¸°ì¡´ Visitor ì¸í„°í˜ì´ìŠ¤ë„ ë³€ê²½í•´ì•¼ í•¨
2. Elementì™€ Visitor ê°„ì˜ ê°•í•œ ê²°í•©ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ
3. í´ë˜ìŠ¤ ê³„ì¸µì´ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆìŒ

#include <iostream>
#include <vector>

class ConcreteElementA;
class ConcreteElementB;

// Visitor ì¸í„°í˜ì´ìŠ¤
class Visitor {
public:
    virtual void visit(ConcreteElementA& element) = 0;
    virtual void visit(ConcreteElementB& element) = 0;
    virtual ~Visitor() = default;
};

// Element ì¸í„°í˜ì´ìŠ¤
class Element {
public:
    virtual void accept(Visitor& visitor) = 0;
    virtual ~Element() = default;
};

// ConcreteElementA ì •ì˜
class ConcreteElementA : public Element {
public:
    void accept(Visitor& visitor) override {
        visitor.visit(*this);  // Visitorê°€ ìì‹ ì„ ë°©ë¬¸í•˜ë„ë¡ ìš”ì²­
    }
    void operationA() {
        std::cout << "ConcreteElementA ì‘ì—… ìˆ˜í–‰\n";
    }
};

// ConcreteElementB ì •ì˜
class ConcreteElementB : public Element {
public:
    void accept(Visitor& visitor) override {
        visitor.visit(*this);
    }
    void operationB() {
        std::cout << "ConcreteElementB ì‘ì—… ìˆ˜í–‰\n";
    }
};

// ConcreteVisitor êµ¬í˜„
class ConcreteVisitor : public Visitor {
public:
    void visit(ConcreteElementA& element) override {
        std::cout << "ConcreteVisitorê°€ ConcreteElementA ë°©ë¬¸\n";
        element.operationA();
    }
    void visit(ConcreteElementB& element) override {
        std::cout << "ConcreteVisitorê°€ ConcreteElementB ë°©ë¬¸\n";
        element.operationB();
    }
};

// ì‚¬ìš© ì˜ˆì œ
int main() {
    std::vector<Element*> elements = {new ConcreteElementA(), new ConcreteElementB()};
    ConcreteVisitor visitor;

    for (Element* element : elements) {
        element->accept(visitor);  // ê° ìš”ì†Œê°€ Visitorë¥¼ ë°›ì•„ë“¤ì´ë„ë¡ í•¨
    }

    for (Element* element : elements) {
        delete element;  // ë©”ëª¨ë¦¬ í•´ì œ
    }

    return 0;
}
