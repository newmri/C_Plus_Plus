ê°ì²´ì˜ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ í–‰ë™ì„ ë³€ê²½ ìƒíƒœë¥¼ ê°ì²´ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬

ğŸ¯ State íŒ¨í„´ì˜ ì¥ì 
âœ… ì¡°ê±´ë¬¸ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ

if-else ë˜ëŠ” switch ë¬¸ì„ ì¤„ì´ê³ , ìƒíƒœë³„ í´ë˜ìŠ¤ë¡œ ë™ì‘ì„ ë¶„ë¦¬.
âœ… ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì´ ë›°ì–´ë‚¨

ìƒˆë¡œìš´ ìƒíƒœë¥¼ ì¶”ê°€í•  ë•Œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì •ì´ ê±°ì˜ í•„ìš” ì—†ìŒ.
âœ… ê°ì²´ì˜ ì—­í• ê³¼ ì±…ì„ì„ ë¶„ë¦¬

ìƒíƒœ ë³€ê²½ì´ Context ë‚´ë¶€ ë¡œì§ì„ ê±´ë“œë¦¬ì§€ ì•Šê³ ë„ ê°€ëŠ¥.

#include <iostream>
#include <memory>

// ìƒíƒœ ì¸í„°í˜ì´ìŠ¤
class DoorState {
public:
    virtual ~DoorState() = default;
    virtual void open() = 0;
    virtual void close() = 0;
    virtual void lock() = 0;
};

// ë¬¸ë§¥(Context)
class Door {
private:
    std::shared_ptr<DoorState> state;  // í˜„ì¬ ìƒíƒœ

public:
    void setState(std::shared_ptr<DoorState> newState) {
        state = std::move(newState);
    }

    void open() { state->open(); }
    void close() { state->close(); }
    void lock() { state->lock(); }
};

// êµ¬ì²´ì ì¸ ìƒíƒœ: ë‹«íŒ ìƒíƒœ
class ClosedState : public DoorState {
public:
    void open() override {
        std::cout << "ë¬¸ì´ ì—´ë ¸ìŠµë‹ˆë‹¤.\n";
    }
    void close() override {
        std::cout << "ë¬¸ì´ ì´ë¯¸ ë‹«í˜€ ìˆìŠµë‹ˆë‹¤.\n";
    }
    void lock() override {
        std::cout << "ë¬¸ì´ ì ê²¼ìŠµë‹ˆë‹¤.\n";
    }
};

// êµ¬ì²´ì ì¸ ìƒíƒœ: ì—´ë¦° ìƒíƒœ
class OpenedState : public DoorState {
public:
    void open() override {
        std::cout << "ë¬¸ì´ ì´ë¯¸ ì—´ë ¤ ìˆìŠµë‹ˆë‹¤.\n";
    }
    void close() override {
        std::cout << "ë¬¸ì„ ë‹«ìŠµë‹ˆë‹¤.\n";
    }
    void lock() override {
        std::cout << "ë¬¸ì´ ì—´ë¦° ìƒíƒœì—ì„œëŠ” ì ê¸€ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n";
    }
};

// êµ¬ì²´ì ì¸ ìƒíƒœ: ì ê¸´ ìƒíƒœ
class LockedState : public DoorState {
public:
    void open() override {
        std::cout << "ë¬¸ì´ ì ê²¨ ìˆì–´ì„œ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n";
    }
    void close() override {
        std::cout << "ë¬¸ì´ ì´ë¯¸ ë‹«í˜€ ìˆìŠµë‹ˆë‹¤.\n";
    }
    void lock() override {
        std::cout << "ë¬¸ì´ ì´ë¯¸ ì ê²¨ ìˆìŠµë‹ˆë‹¤.\n";
    }
};

// ì‹¤í–‰ ì˜ˆì œ
int main() {
    Door door;

    auto closed = std::make_shared<ClosedState>();
    auto opened = std::make_shared<OpenedState>();
    auto locked = std::make_shared<LockedState>();

    door.setState(closed);
    door.open();  // ë¬¸ì´ ì—´ë ¸ìŠµë‹ˆë‹¤.

    door.setState(opened);
    door.lock();  // ë¬¸ì´ ì—´ë¦° ìƒíƒœì—ì„œëŠ” ì ê¸€ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

    door.setState(locked);
    door.open();  // ë¬¸ì´ ì ê²¨ ìˆì–´ì„œ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

    return 0;
}
