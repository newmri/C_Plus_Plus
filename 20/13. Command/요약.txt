μ”μ²­κ³Ό μ‹¤ν–‰μ„ λ¶„λ¦¬
μ €μ¥, λ΅κΉ…, μ‹¤ν–‰ μ·¨μ†λ“±μ— μ©μ΄

π”Ή Command ν¨ν„΄μ μ¥μ 
β… μ”μ²­κ³Ό μ‹¤ν–‰μ„ λ¶„λ¦¬ β†’ ν΄λΌμ΄μ–ΈνΈλ” μν–‰ν•  μ‘μ—…μ— λ€ν• κµ¬μ²΄μ μΈ μ •λ³΄λ¥Ό μ• ν•„μ” μ—†μ
β… μ‹¤ν–‰ μ·¨μ†(Undo) λ° μ¬μ‹¤ν–‰(Redo) κΈ°λ¥μ„ μ‰½κ² κµ¬ν„ κ°€λ¥
β… λ…λ Ήμ„ νμ— μ €μ¥ν•μ—¬ μ”μ²­μ„ λ‚μ¤‘μ— μ‹¤ν–‰ν•  μλ„ μμ
β… μƒλ΅μ΄ λ…λ Ήμ„ μ¶”κ°€ν•λ”λΌλ„ κΈ°μ΅΄ μ½”λ“ μμ • μ—†μ΄ ν™•μ¥ κ°€λ¥ (OCP μ›μΉ™)

π”Ή Command ν¨ν„΄μ λ‹¨μ 
β ν΄λμ¤ μ μ¦κ°€ β†’ μ”μ²­μ„ μΊ΅μν™”ν•κΈ° μ„ν•΄ λ§μ€ ConcreteCommand ν΄λμ¤κ°€ ν•„μ”ν•  μ μμ
β λ‹¨μν• μ”μ²­μ΄λΌλ©΄ μ¤λ²„ν—¤λ“ λ°μƒ β†’ λ‹¨μν• νΈμ¶μ„ μΊ΅μν™”ν•λ©΄ λ¶ν•„μ”ν• μ½”λ“ μ¦κ°€

#include <iostream>
#include <vector>
#include <memory>

// Command μΈν„°νμ΄μ¤
class Command {
public:
    virtual ~Command() = default;
    virtual void execute() = 0;
    virtual void undo() = 0;
};

// Receiver (μ‹¤μ  μ‘μ—…μ„ μν–‰ν•λ” κ°μ²΄)
class Light {
public:
    void turnOn() {
        std::cout << "Light is ON\n";
    }

    void turnOff() {
        std::cout << "Light is OFF\n";
    }
};

// ConcreteCommand (λ…λ Ήμ„ μν–‰ν•λ” ν΄λμ¤)
class LightOnCommand : public Command {
private:
    Light& light;
public:
    explicit LightOnCommand(Light& l) : light(l) {}

    void execute() override {
        light.turnOn();
    }

    void undo() override {
        light.turnOff();
    }
};

class LightOffCommand : public Command {
private:
    Light& light;
public:
    explicit LightOffCommand(Light& l) : light(l) {}

    void execute() override {
        light.turnOff();
    }

    void undo() override {
        light.turnOn();
    }
};

// Invoker (λ…λ Ήμ„ μ”μ²­ν•λ” κ°μ²΄)
class RemoteControl {
private:
    std::vector<std::unique_ptr<Command>> history;
public:
    void executeCommand(std::unique_ptr<Command> cmd) {
        cmd->execute();
        history.push_back(std::move(cmd)); // μ‹¤ν–‰ν• λ…λ Ήμ„ κΈ°λ΅ (Undo κ°€λ¥)
    }

    void undoLastCommand() {
        if (!history.empty()) {
            history.back()->undo();
            history.pop_back();
        }
    }
};

// ν΄λΌμ΄μ–ΈνΈ μ½”λ“
int main() {
    Light light;
    RemoteControl remote;

    // LightOnCommand μ‹¤ν–‰
    remote.executeCommand(std::make_unique<LightOnCommand>(light));
    // LightOffCommand μ‹¤ν–‰
